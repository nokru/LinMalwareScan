#!/bin/bash

sudo apt-get --yes update
sudo DEBIAN_FRONTEND=noninteractive DEBIAN_PRIORITY=critical apt-get -q -y -o "Dpkg::Options::=--force-confdef" -o "Dpkg::Options::=--force-confold" upgrade


sudo apt-get --yes install nano git ssh ntp nfs-common samba-common
sudo service ntp restart

#Install required packages for alpine
sudo apt-get --yes install py-pip python-dev libffi-dev openssl-dev gcc libc-dev make


#Set Timezone right
sudo echo Europe/Vienna > /etc/timezone

#create folder for mount
sudo mkdir -p /mnt/dstshare1
sudo mkdir -p /mnt/dstshare2

#checkout
cd /opt
git clone https://github.com/nokru/LinMalwareScan.git

cd /opt/LinMalwareScan/
git pull
sudo chmod +x /opt/LinMalwareScan/bootstrap.sh
#sudo /opt/LinMalwareScan/bootstrap.sh

#php malware finder
sudo apt-get --yes install yara

cd /opt
git clone https://github.com/jvoisin/php-malware-finder.git


#maldetect
sudo apt-get install clamav -y
cd /tmp
wget https://www.rfxn.com/downloads/maldetect-current.tar.gz
tar -xf maldetect-current.tar.gz
rm -rf maldetect-current.tar.gz
cd maldetect*
sudo bash install.sh

sudo maldet --update-ver
sudo maldet --update-sigs


#lynis auditing
cd /opt
git clone https://github.com/CISOfy/lynis
#cd lynis; sudo ./lynis audit system > /opt/lynis.txt


#chkroot installieren
sudo apt-get --yes install chkrootkit
#sudo chkrootkit > /opt/chkrootkit.txt


#rkhunter installieren
sudo apt-get --yes install rkhunter
#sudo rkhunter -c > /opt/rkhunter.txt


#get yara rules
cd /opt
git clone https://github.com/Yara-Rules/rules.git





